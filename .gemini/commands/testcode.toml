description = "Test code examples in article for syntax and basic logic errors"
prompt = """
Extract and validate all code examples from this article.

For each code block, perform comprehensive analysis:

## 1. Identify Language and Context
- What language/technology?
- What version is implied or stated?
- What's the purpose of this code?
- What problem does it solve?

## 2. Syntax Validation
- Is syntax correct for the specified language/version?
- Are all brackets, parentheses, quotes properly matched?
- Are statements properly terminated?
- Are imports/using statements present if needed?
- Is indentation consistent and correct?

## 3. Logic Check
- Does the code do what the article claims?
- Are variable names consistent throughout?
- Are all variables declared before use?
- Is error handling present where needed?
- Are there obvious logic errors?
- Will the code actually run as written?

## 4. Common Issues
- Undefined variables or functions
- Type mismatches
- Missing error handling
- Hardcoded values that should be parameters
- Resource leaks (unclosed files, connections)
- Security issues (hardcoded credentials, SQL injection, command injection)
- Race conditions or concurrency issues
- Off-by-one errors
- Null/undefined reference errors

## 5. Output Validation
- If output is shown in comments, does it match what code would produce?
- Are example values realistic?
- Are data types in output correct?

## 6. Best Practices Check
- Follows language conventions?
- Uses idiomatic patterns?
- Proper naming conventions?
- Appropriate comments?
- Efficient algorithms?
- Memory management correct?

## 7. PowerShell-Specific Checks (if applicable)
- Cmdlet names correct?
- Parameter names and usage correct?
- Pipeline usage appropriate?
- Error action preferences set correctly?
- Proper use of $_ and $PSItem?
- Scope declarations appropriate?

## 8. Security Analysis
- No hardcoded credentials
- Input validation present
- SQL/command injection prevented
- File path validation
- Proper authentication/authorization
- Secure communication (HTTPS, encryption)

---

## Output Format

Provide structured analysis for each code block:

### CODE VALIDATION SUMMARY

**Overall Code Quality Score:** [0-100]

**Statistics:**
- Total code blocks: [N]
- Valid (no issues): [N]
- Warnings (minor issues): [N]
- Errors (critical issues): [N]

**Status:** [✓ ALL PASS / ⚠ WARNINGS PRESENT / ✗ ERRORS FOUND]

---

### DETAILED CODE ANALYSIS

For each code block:

**Code Block #[N]: [Section Name or Line Number]**

**Location:** [Section heading or line range]

**Language:** [Detected language and version if specified]

**Purpose:** [What this code is supposed to do]

**Status:** [✓ Valid | ⚠ Warning | ✗ Error]

**Code:**
[Reproduce the exact code from article]

**Issues Found:**

*Critical Errors:*
- [Line X]: [Specific error with explanation]
- [Line Y]: [Specific error with explanation]

*Warnings:*
- [Line X]: [Warning with explanation]
- [Line Y]: [Warning with explanation]

*Best Practice Violations:*
- [Issue 1]
- [Issue 2]

**Security Concerns:**
- [Security issue 1 if any]
- [Security issue 2 if any]

**Recommended Fixes:**
[Corrected version of the code]

**Explanation of Changes:**
- [Change 1 and why it was made]
- [Change 2 and why it was made]

**Output Validation:**
- Expected output matches code logic: [Yes/No]
- Output examples are accurate: [Yes/No]
- Issues with output: [List if any]

---

### CRITICAL ISSUES (Must Fix)

List all code blocks with critical errors:

**Block #[N] - [Brief description]:**
- **Error:** [What's wrong]
- **Impact:** [What will happen if code runs]
- **Fix:** [How to correct it]

---

### WARNINGS (Should Fix)

List all code blocks with warnings:

**Block #[N] - [Brief description]:**
- **Issue:** [What could be improved]
- **Reason:** [Why it matters]
- **Suggestion:** [How to improve]

---

### SECURITY ANALYSIS

**Security Issues Found:** [Number]

For each security issue:

**Security Issue #[N]:**
- **Location:** Block #[N], Line [X]
- **Type:** [e.g., Hardcoded credential, SQL injection, etc.]
- **Risk Level:** [HIGH/MEDIUM/LOW]
- **Current Code:** [Problematic code snippet]
- **Secure Alternative:** [How to fix it securely]
- **Why It Matters:** [Explanation of the risk]

---

### TESTING RECOMMENDATIONS

**Tested:** [Which blocks were actually executable and tested]

**Cannot Test Without Environment:** [Which blocks need specific environment]

**Recommended Manual Tests:**
1. [Test scenario 1]
2. [Test scenario 2]
3. [Test scenario 3]

**Unit Test Suggestions:**
[Suggested unit tests for the code]

---

### BEST PRACTICES ASSESSMENT

**Adherence to Best Practices:** [0-100]%

**Strengths:**
- [Positive aspect 1]
- [Positive aspect 2]

**Areas for Improvement:**
- [Improvement 1]
- [Improvement 2]

---

### OVERALL RECOMMENDATIONS

**Critical Actions (Before Publishing):**
1. [Must-fix item 1]
2. [Must-fix item 2]

**Suggested Improvements:**
1. [Enhancement 1]
2. [Enhancement 2]

**Additional Considerations:**
- [Consideration 1]
- [Consideration 2]

---

## Validation Approach

- Be specific about line numbers and exact errors
- Distinguish between syntax errors, logic errors, and style issues
- Consider the article's target audience (beginner/intermediate/advanced)
- Verify code against latest version of language/framework
- Test execution logic mentally or suggest actual testing
- Provide corrected versions when errors found
- Explain WHY something is wrong, not just THAT it's wrong
- Consider security implications
- Focus on code that will actually be copied and used by readers

---

ARTICLE TO TEST:

{{args}}
"""
